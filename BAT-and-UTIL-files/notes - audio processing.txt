[Some BRAINSTORMING/NOTES at the bottom]




********* HOW TO PROCESS A BATCH OF AUDIO ****************
********* HOW TO PROCESS A BATCH OF AUDIO ****************
********* HOW TO PROCESS A BATCH OF AUDIO ****************
********* HOW TO PROCESS A BATCH OF AUDIO ****************
********* HOW TO PROCESS A BATCH OF AUDIO ****************
********* HOW TO PROCESS A BATCH OF AUDIO ****************



To identify songs with an AI (limit: 10 per day):  https://www.aha-music.com/identify-songs-music-recognition-online/





 
- create/sequester new batch into it's own folder
	- make a folder for the new batch, i.e. c:\new\music\BATCH.YYYYMM  {good to give the batch a dated name}
	- find new music in %NEWCL%\music\                                 {or wherever}
	- move some music to the new batch folder
		- you can go into the batch folder and type "counts" to see how many files are in it so far
		- batch sizes are usually 200 - 2000 songs
	- generally, and repeatedly, if the batch folder moves around, run "bthis.bat" from the root of the batch, so that "c:\b" points to our new batch location. 
		- This makes life easier! And "c:\b" is referred to in our notes a lot. "B" for "Batch"
		- There are also a "cthis" and "dthis" commands that make c:\c and c:\d point to curent folder
	- Everything from here on out is referring to our batch ("c:\b") and not to anything else!


- within the batch, run: c:\bat\preprocess-music-batch.bat 


- do all the renamings/pre-research of albums
	- manually walk through all the folders in the batch to do this â€”â€” it's a detail-oriented task
	- albums should be FLAC, MP3, or WAV â€”â€” any other formats need to be converted to wav (extract-all-wavs.bat) and the original audio files trashed or archived
	- DO NOT look at/deal with cover art, because later we will be downloading more, so this would end up making us do it twice!! 
	- If every single mp3 has the artist and album nam e in it, there is a quick fix!
		* "an rmaa" - rmaa stands for remove artist & album info - this command will change names like:
			==> from ==> "Metallica - Ride The Lightning - 01_Ride The Lightning.flac" ==> 
			==> into ==>                                  "01_Ride The Lightning.flac" ==> thus removing the artist and album names
	- Normally, just use the "ap" autoprocess command!!
			It will open up relavant web pages [wiki, discogs] to research additional stuff 
				For example, stuff just labeled "(live)" often has the dates listed on discogs. You have to open up a bunch of the individual realeses but ONE of them will often have the true live date
			It will start an 'allfiles mv' run



- run: check-for-filenames-that-may-be-questions.bat 
		* look for filenames that need question marks added to their name
		* but keep in mind that we use UNDERSCORES to represent these question marks 
			* Note for future steps: Sometimes these "_" will later need to be converted back into "?" in the id3 tags




- NO LONGER DONE: once upon a time (1995-2022), this is where we would extract-all-wavs for every damn (non-wav) audio file by doing "sweep extract-all-wavs"
	    - but now (2023), we allow mp3/flac/wav files to exist at this point in the process, because we no longer re-encode EVERY file, because we now have faith in ReplayGain



- ONLY IF WINDOWS 7 MACHINES STILL EXIST: run: from inside the batch folder, from a Windows 7 machine [if we have one]: sweep naw - normalize all wavs - yes even in 2023 we still do this! - still applicable post-flac because some stuff we get is WAV-only format - yes we rely on replaygain tags these days but if the WAV is there, we'd still like to make the adjustment
		* Note #1: I've spent hours tyring to get c:\util\normalize.exe [which really belongs in c:\util2\obsolete\normalize-stopped-working-after-win7.exe] to run in a post-Windows 7 world. It won't.
		* Note #2: I spent hours trying multiple ISOs for Windows 7 in a virtual machine. STILL WOUDLN'T WORK.



- run: check-for-invalid-audio-files.bat - ZERO OUTPUT MEANS WE'RE GOOD - see if all the files here are in the correct format now 
		* The goal here is to have our files only be in FLAC/MP3 (or, in rare case, WAV).
		* There are occasional exceptions but probably not anything Carolyn will ever encounter - things like .MOD, .STM, .MIDI, and other obscure formats we may actually occasionally collect



- MOVE BATCH: into processing (mp3\_PROCESSING\processing) - run "bthis.bat" within the bath folder if you want c:\b\ to point to it easily
	- 202303 note: honestly, if you "bthis.bat" so that it's just c:\b\, it kind of doesn't matter where this folder really lives, so this step isn't that necessary as long as you don't lose track of things



- "CoolEdit" / audio edit phase - fix up anything we need to fix up
	- open EVERY file just to visually check for anamolies / hidden tracks / annoying shit
	- check for TODOs ("ldg todo") afterward because filenames may indicate some stuff we were supposed to do in edit
	- feel free to CREATE TODOs by renaming files as well
	- if you want to do noise reduction by sampling a hiss in order to remove the hiss you sampled..... 
			- highlight the silence ... it's good to have 1+ seconds of it, if not 3+ seconds. Adobe will refuse if less than 1s but say you have 0.2s, you can just copy it over 5X until it's 1.0s :)
			- go to Transform->Noise Reduction->Noise Reduction. 
					- If you haven't already, Set the default settings.  They will remain set "forever".  
					  [Note that some of these settings no longer exist in newer versions of Adobe Audition]
					  Set: Snapshots in profile to 900, FFT size to 24000/highest possible, Remove Noise selected, Reduce by *** 40db, Precision Factor 11, Smoothing Amount 1, Transistion Width 2db (2008 update: 20db transition width MAY be better... or MAY kill cymbals!) 
					  A NEW SETTING I'M ONLY SEEING IN 2024 IS "NOISE FLOOR" -- just having to experiment with that one, higher seems less destructive but less noise-cancely
					  Sometimes it is very helpful to use the "output hiss only" button to find out what it has considered to be hiss!
					  Once you set those once they stay there but occasionally reset (thus even I had to put them in this file for reference, to fix them myself!).  
					  For the noise reduction level, I generally use around 95%.  This may water it down a bit.  That can be reduced to 80% & still get most of the noise/buzz out.  
					  Listen, and use the lowest setting that gets the noise out.






- Encode! Any edited WAV files need encoding to mp3 [c:\bat\audio-batch-processing---encode-everything-and-remove-redundant-WAVs.bat]
	* This bat needs to be run even if no WAVS are present
	* These days, most edits are mp3/flac inline so we don't need to re-encode EVERYTHING like before
	      ...But there are still things that are acquired in WAV format sometimes (extracted youtube videos, CD rips), so this step will always needs to exist!
	* from the root of our batch:
			* CLOSE Adobe Audition! Seriously! 
				    (It doesn't always unlock file handles of every WAV file and the next step can fail to delete a WAV if you don't!)
			* run: 	c:\bat\audio-batch-processing---encode-everything-and-remove-redundant-WAVs.bat
								* just for reference, what that command does [as of 20030407] is:
											sweep if exist *.wav call allfiles wav2mp3 -------- encodes any WAVs into MP3 using wav2mp3.bat
											sweep call del-WAVs-if-mp3s-or-flacs-exist -------- deletes any WAVs that are sitting next to MP3/FLAC equivalents
											sweep del *.xmp                            -------- deletes these crap files Adobe Audition leaves everywhere

				
	



- OPTIONAL: MOVE BATCH: into tagging (mp3\_PROCESSING\READY-FOR-TAGGING-1-(id3v2 only)) 
							- we're kinda phasing this out 
							- if you do, run "bthis.bat" within the batch to make "c:\b" point to the new folder you just moved it t
							- this step is kind of pointless, huh?   
							  (This was more for the era when multiple-batches were happening simultaneously)





- TAGGING: STEP 1: INITIAL: MusicBrainz Picard pre-tag - MusicBrainz has the worst user interface of all time but I figured out the steps
	- first time setup after installing windows
			- make sure Options->Rename Files is off
			- make sure Options->Save tags    is on
			- go into Options->Options
					- Options->Options->Cover art:
						- check "Embed cover imagers into tags"
						- check "Embed only a single front image"
						- check "Save cover images as separate files"
						- Use the following filename for images: cover
						- UNCHECK "ovewrite the file if it already exists"
						- UNCHECK "save only a single front image as a separate file"
						- UNCHECK "Always use the primary image type as the file name for non-front images"
						- check all cover art providers (local files, cover art archive, allowed cover art urls, covert art archive: release group)
					- Options->Options->Fingerprinting:
						- select: Use AcousticID 
						- check "save AcousticID fingerprints to file tags"
					- Options->Options->Plugins:
						- AcousticBrainz tags sub-menu: check everything. Put ALL the tgags in: bpm, key, low level, etc.

	- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
	- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
	- !!!!!!!!!!!!!!!!!!!!!!!!! EVERY time, before starting:  * make sure Options->Rename files is off !!!!!!!!!!!!!!!!!!!!!!!!
	- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
	- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

	- why do we use this?           It adds a LOT of extra/useful/neat tags, genre, year all kinds of stuff Tag & Rename doesn't do.
	                                Finding what year MISC tracks came out in is super useful and time-saving.

	- the general process:
		* Note that when we say "left" and "right" pane, we are talking about the two large, main panes in the middle. 
		                        NOT the folder-browser/file-picker leftmost narrow "pane" with all the directories listed

		1) If, upon loading up MusicBrainz Picard, there are any files in the main 2 pains, highlight them and delete them
		        (This will not delete the files, just their listing in MusicBrainz Picard)
		2) use the "Add Folder" button to add the current batch (c:\b\ if you 'bthis' every time you move a batch to a new location)
				- This will start the process automatically?  It seems to.
				- it may take a LONNNNNNNNNNNNG time downloading cover art â€”â€” as much as even an hour for every 1000 songs!

				- to tell that it iss still doing stuff: 
						1) status bar: bottom-right action: has a buncha stuff, the leftmost of which is an hourglass timer with an estimated time [never accurate] next to it
						2) Left of status bar will have messages like "Downloading cover art of type 'Liner' for dd196zabc59-e3e3-4097"

				- EVENTUALLY, THIS WILL BE DONE. Go make food or something.  Proceed to step#3 when activity finally stops.

		3) left pane: select all, then click 'cluster'
				- should be pretty quick, almost instant. 
				- there is an opportunity to manually move "unclustered files" (i had 49 out of 1500 for one batch, for example) from the left pane into clusters on the right pane, but it is generally not worth bothering. But occasionally there will be situations like "1 track left over that is obviously in a cluster of an album" and you can drag it from left to right. This is rare. One way to check is to click 'Album' to sort by album on both left and right panes, and see if there are some obvious corrections. But historically, it is not worth dwelling on this.

		4) left pane: select all, then click 'lookup' â€”â€” can take a good 3 minutes per 1,000 songs
				- sometimes the button is not enabled? like? nothing can be looked up? huh?
				- again, watch [non-accurate] timer near the bottom-right of the status bar

		5) left pane: select all, then click 'scan'
				- this will take awhile - 10min per 1000 songs? - again: watch timer in the bottom-right corner for somewhat of a prediction

		6) at this point, select all the files in the right pane, right-click, select 'save'.  this should save the initial MusicBrainz tags 
		   These are just a baseline so that when we do our normal tagging, a lot of it is pre-emptively done already.

		7) Beware! MISC folders with lots of songs might get 100 "cover (1).jpg" images, probably easier to just delete them all than review them. 
           This step is not great for MISC Folders. (No cover art steps are. MISC folders are a pain!)

		8) We are done! MusicBrainz can be closed!





- TAGGING: STEP 2: ALBUM ART: Claire's tools [cover_downloader.py] {can take hours for 1000 songs}
	- This tool is not really meant for single albums, though it COULD be run.  Usually, for single albums, we do it manually.
	- This tool is            meant for MISC/ONEDIR non-album folders. The idea is that every MP3 has a JPG of the same name, which is it's front cover.
	- If it is a folder of non-album/MISC songs (ONEDIR, TRIBUTES, MISC, COVERSâ€”â€”anything where there would not be ONE cover file for ALL of it)
		- 1) run cover_downloader.py to run Claire's cover_downloader script. It will take maybe 30ish seconds per song, so it's NOT fast.
		         cover_downloader.py is very well documented within the script, if you are looking for more tips/info.
				 "sweep cover_downloader" is also valid if you want to run a buncha stuff while not-at-keyboard                 
		- 2) after successful step #1, run the freshly-generated get-art.bat, which is generated in step #1 (could sweep thru several folders too)
		- 3) manually review the JPGs downloaded [in irfanview]
				- deleting the invalid ones (so one is left per song) â€”â€” The ones that are NOT for the right song
				                      [Make sure to at least glance at the artist and song title if there is one]
							- I usually run steps 1-3 at least twice, so often times the first review, i just nuke anything that looks SUPER low quality in hopes that the successive run happens to find a better one [rare, but not unheard of]
				-  crop any that need cropping (non-full screen, highlight crop area, hit Ctrl-Y, then save with Ctrl-S)
				    [They really should be square if possible â€”â€” that is the standard cover album shape.] 
					[But also, if it's a vinyl record, i don't see a point in capturing the vinyl itself, just the label]
				- If stretched to a dumb aspect ratio, Ctrl-R can let you resize just one of the dimensions
				             - sometimes helpful after cropping because it's hard to crop in an exact square
							 - but in practice, the human eye might not be able to tell the difference :)
				- Hit Shift-S [capital S] in Ifranview to sharpen ones that are hard to read after cropping
				- Hit Ctrl-U for arbirary rotation, like if you want to turn it slightly 
				- you can even use Image->Rotate to rotate them if you want
		- 4) run wedding-party.py to sort the married files into another folder
		     Why? Because this tool is not 100%.  It is almost always worth running at least one more time after throwing a wedding-party.py to sort out the successful ones. For big (100+ songs) folders I often have to make 3-4 passes, but for smaller folders (~20 songs in a ONEDIR for example) maybe only 1 or 2X. It is not a cut-and-dry call.
		- 5) Optionally repeat steps #1-4 again. Failing to find art in one go doesn't guarantee it won't find it in the next.
             Also, when songs get renamed, it is worth running against the new filename.
		- 6) Eventually, decide we aren't going to repeat steps 1-5! We're done downloading and reivewing art automatically and will do the rest manually!
		- 7) run CoverArtmbedder.bat / cover_embedder.py to run Claire's cover-embedder script â€”â€” it generates embed-art.bat
		- 8) run embed-art.bat, which is generated by step #7
		- 9) no JPGs (other than perhaps a cover.jpg for the entire folder) should be left after this, 
		     as they are all embedded and the script should have deleted them after successful embedding!
		     Now all that is left is the manual part; but hopefully this part reduced the work of the manual part, as album art is one of the most labor intensive parts of this process. As much work as these 9 steps may be, it is WAY less work
			 than doing it all manually!  Which is what the next step will be: Doing the missed ones manually.


ðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸ MOVE THIS GOAT TO WHEREVER WE ARE IN THE PROCESS AS A MARKER OF WHERE WE ARE ðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸ
ðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸ MOVE THIS GOAT TO WHEREVER WE ARE IN THE PROCESS AS A MARKER OF WHERE WE ARE ðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸ -
ðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸ MOVE THIS GOAT TO WHEREVER WE ARE IN THE PROCESS AS A MARKER OF WHERE WE ARE ðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸðŸ  


- TAGGING: STEP 3: ALBUM ART: Mp3Tag - embed album art manually for all the ones missed
	- this is to review any embeddings done in the last step, and to manually embed all the ones the last step missed
	- embed album art using the Mp3Tag program 
		- FIRST TIME RUNNING IT AFTER INSTALLATION: Go to Options->Tags->Mpeg and uncheck 'APE' under 'Read' and 'APEv2' under 'Write' and 'APE' under 'Remove' - basically, turn off APE support to properly "see" art embedded with my scripts
		- ART QUALITY: we like to have >500x500 res if possible, but really, we love having >1000x1000 res. 
		- CARING: we care more for stuff we actually listen to than stuff we just collect
		- If the art is present, it was likely downlaoded that way, or embedded in the last step! Yay! Already done!
		- if the art is not present, we have to add it. Boo!
			- first click the MP3/FLAC and try to locally add whatever cover.jpg/png is in the folder already
		- searching can be automated using Mp3Tag's "tools":
			- you can use the tool (right click, but also there are some keystrokes like Ctrl-3 through Ctrl-7) to automate google image searches for better cover art
				- TODO: setting up the tools is tedious - finish this list
					#1/Ctrl-1: name: winamp.bat enqueue                           path: c:\tcmd\tcc.exe parameter: C:\bat\winamp-add.bat "%_path%"                                // check 'for all selected files': Yes
					#2/Ctrl-2: name: enqueueue                                    path: c:\tcmd\tcc.exe parameter: c:\bat\enqueue.bat "%_path%"                                   // check 'for all selected files': Yes
					#3/Ctrl-3: name: album-art-tool-for-mp3Tag  [using filename]  path: c:\tcmd\tcc.exe parameter: c:\bat\album-art-tool-for-mp3Tag.btm "%_filename%"             // check 'for all selected files': Yes
					#4/Ctrl-4: name: album-art-tool-for-mp3Tag-beforeDash         path: C:\tcmd\tcc.exe parameter: c:\bat\album-art-tool-for-mp3Tag-beforedash.btm "%_filename%"  // check 'for all selected files': Yes
					#5/Ctrl-5: name: album-art-tool-for-mp3Tag ARTIST+ALBUM       path: c:\tcmd\tcc.exe parameter: c:\bat\album-art-tool-for-mp3Tag.btm "%artist%" "%album%"      // check 'for all selected files': Yes
					#6/Ctrl-6: name: album-art-tool-for-mp3Tag ALBUM ONLY         path: c:\tcmd\tcc.exe parameter: c:\bat\album-art-tool-for-mp3Tag.btm "%album%"                 // check 'for all selected files': Yes
					#7/Ctrl-7: name: album-art-tool-for-mp3Tag artist + filename  path: c:\tcmd\tcc.exe parameter: c:\bat\album-art-tool-for-mp3Tag.btm "%artist%"  "%_filename%" // check 'for all selected files': Yes
	- for ONEDIR/MISC folders from many different years, this can actually be a good time to edit the year tag 
		- [yes, tags can be edited in mp3tag too! it's just not the preferred tool we usually use for that]
		- Ctrl-3 / tool#3 / "using filename" is often the best tool for ONEDIR stuff that has the artist name in the filename
	- and oh: only embed ONE album art image -- the cover -- per file ... forget multi-image embedding
		- sure, it's possible to embed back.jpgs officially as the back, pictures of the disc.jpgs as pictures of the disc, etc etc, but:
			- multiple ones cause weird behavior in MiniLyrics
			- WinAmp can't always view the extra covers so what's the point






- TAGGING: STEP 4: ALBUM ART: run-eaa-in-appropriate-subfolders (extract superior embedded artwork over inferior artwork on harddrive)
	- BACKGROUND: Often times, when we embedded album art into our mp3|flac files, we found ones on the internet that are much higher resolution than the cover|folder.jpg|gif|png files sitting in the folder
		- so we need to make these superior higher resolution versions in the mp3|flac files ALSO be the one sitting in the folder as a separate file
		- "eaa" is the command - extract album art - this extracts the cover art from the first audio file it finds, and overwrites the existing image file ONLY IF the extracted one is a larger file size
			- but when should we run it?
				- always makes sense to run in a folder that already has a cover|folder.jpg|gif|png because it may find a higher quality one
				- always makes sense to run in album folders                         (easy to detect as they almost always have filenames that start with a number)
				- never makes sense to run in MISC/ONEDIR type folders
	- *** WHAT TO ACTUALLY DO: ***
		"run-eaa-in-appropriate-subfolders" - this will sweep through and run "eaa" if it's an album/appropriate place to do so. Involves over 20 checks.


- TAGGING: STEP 5: ALBUM ART: final review
	- optional, but recommended: run "duplicate-files-delete-them-including-sufolder-duplicates" and ANSWER â­â­â­VERY VERY VERYâ­â­â­ CAREFULLY when deleting
	- finally, go through a full directory-crawl reviewing/deleting/renaming the downloaded album art from all the previous steps so that everything is perfect
            - THIS IS A BIG STEP! MusicBrainz Picard can leave a ton of these in each folder. This is the final review. It is slow and arduous.




- TAGGING: STEP 6: THE ACTUAL TAGGING: â€“ Tag&Rename â€” finally giving up on id3v1 tags in 2023!
    	- get all fields of all id3v2 tags right
                - cover songs: sometimes we like to mention original artists in the comments



- TAGGING: STEP 7: add ReplayGain tags - "sweep argt" - to all (flac/mp3) files
	- may not work with songs (esp flac) that have a percent in their name! May have to temp-rename (esp flacs) to work at command line! 
		- will not find this out until the review later, just something being mentioned
        - this is a good reason to still avoid percent-signs in music in 2024.  If we were not unicode-phobic in filenames I would recommend a unicode % that is different than the ascii %










- Inside the batch, run: preprocess-audio-tagging-batch 
		- this deletes some junk files
		- Now, we are ready to go to tagging!!!!





- manually review ReplayGain tags 
	- WE DO IT AUTOMATICALLY NOW!!!!!!!!!!!!!!!!!!! YAYYY!!!!
		* Step 1: run: audit-music-files.py  ----------- requires working python with a lot of installed packages tho
		* Step 2: if RG_fix.bat is generated (or RG_yes.dat is non-zero), we havef problems â€” run RG_fix.bat to fix them (hopefully it does), then repeat Step 1
				  If repeating leaves some stragglers (RG_no.dat is nonzero in size) you may have to refer to "SOME SONGS WILL HAVE FAILED" in the deprecated instructions below
		* Step Z: There is no step Z! THESE ARE JUST DEPRECATED OLD INSTRUCTIONS TO KEEP AROUND:
				- walk the folder tree manually, typing "lr" [list-replaygain-tags] at command line in each folder
					- use "nd" to go to next folder for ease
					- use "nd" only after being done with any subfolders -- don't forget "cheese", or "ORIGINAL-VERSIONS", or *any* subfolders
				- SOME SONGS WILL HAVE FAILED! That's why we're doing the review!
					- be vigilant about keeping an eye out for songs that have a % symbol in them, they (esp flac) may have failed
					- the command line tool only works with 2-channel songs, so all 5.1 songs will fail
					- occasionally some files will fail randomly because metaflac/metamp3 isn't perfect at reading/writing the tags
					- *** for all of these various failures, you can open the file in Foobar media player, and rightclick the files to add ReplayGain tags with Foobar ***
						- when you notice one that's missing, use "cthis.bat" to make c:\c\ point to the folder you are in
						- open Foobar 
						- file->add file->browse to "c:\c" if it's not there already->add the file to foobar
						- right click the file(s)s -> ReplayGain -> scan as invidual track/album (depending on which is appropriate) -> update file tags
						- then do "lr" again to verify that it worked
							- sometimes EVEN AFTER THAT, they still won't be viewable at the command line ("lr" will fail).  
								- it's extremely rare
								- open them in WinAmp to verify the ReplayGain tags were successfully added
								- if they still aren't viewable, WE HAVE A PROBLEM. It may behoove us to manually normalize the audio in Adobe Audition if we notice problems.




- VERY IMPORTANT STEP: PROCESS THE TODOS:
	- run "ldg TODO" to check for any TODOs that may need to be done â€” This may mean back to editing audio files, as we often discover things we need to do at all steps fo the process




- FINAL PRE-ASSIMILATION CHECKS:
	- FROM WITHIN OUR BATCH FOLDER, run "*del /s /E *.m3u8" because tag&rename (i think) creates these when we preview songs while tagging
	- FROM WITHIN OUR BATCH FOLDER, run "sweep dep-mp3s-if-flacs-exist" to deprecate mp3s if a companion flac exists 
		- we deprecate the file rather than delete, in case something goes wrong, it's nice to have the m3ps to fall back on.  
		- A few years from now (2022) when we are more comfortable with the validity of flac files, we can delete the deprecated companion mp3s, but for now (2022), we're going to keep them around, and now (2024) we're realizing this situation doesn't even come up so who cares
	- FROM WITHIN OUR BATCH FOLDER, run "ldg \.wav$" to check for WAV files -- they really shouldn't be here at this point in the workflow, at all!!!!!!!!!
		- at this point, any WAV files were already supposed to be mp3s that have embedded art and are tagged properly, so wtf!
		- might have to kick it back for a future batch, delete it, or figure it out
	- THE FINAL FINAL CHECK:
		FROM WITHIN OUR BATCH FOLDER, run "dir /s /p" to just do a basic visual review that everything looks ***FUCKING BEAUTIFUL AND AS PERFECT AS CAN BE***
			I NOTICED A BUNCHA EXTRA COVER(??).JPG FILES LAST TIME â€” WATCH OUT! Might be missing a step related to coverdownloader cleanup


	


- ASSIMILATE BATCH INTO COLLECTION: final assimilation of new batch into collection repository - generally one folder at a time, painstakingly and carefully
	- SUMMARY: now is time to move files from our batch to the main, official mp3 collection!
	- TIP: we should [have already] run "bthis.bat" in the base folder our batch, so that c:\b\ points to our batch. Very convenient! 
	- STEP 1: move the entire batch into \mp3\_processing\testing\BATCHNAME [we could get away with skipping this though] prior to assimilation
		      TO DO THIS: if c:\b\ points to our batch, we could go to c:\ and then say "put b c:\mp3\_processing\testing" and then make sure to name it something like BATCH202304 
    - STEP 2: OPTIONAL: navigate to c:\mp3\_processing\testing\{our batch folder we just moved it to} then run "bthis" to make c:\b\ point to this new batch location
	- I USUALLY SKIP THIS: it may behoove us to make a playlist of the music here and let it run for awhile to actually test it, but life goes by too fast to always allow this
	- STEP 3: UHHHHHH WHAT HAPPENED: there *WAS* a preprocess.bat inside \mp3\_processing\testing\ that may need to be run now! ... But in 2024 I'm not seeing it exist
	- TIP: for best efficiency, one pane (left?) should be at c:\mp3\ at the command line, and another should be at c:\b\ (our batch) â€” alt-shift-minus will open panes horizontally
	- STEP 4: THE MEAT! DOING ALL THE ACTUAL-ACTUAL MOVING!
		- "LEVEL: RED" - the worst ones to do
			- do song  upgrade-replacements -- very rare, hardly everh appens
			- do album upgrade-replacements ... these are the most complicated to do, but don't generally affect the base attrib lst
				- when replacing an album:
					- takes some critical thought
					- deprecate original album folder (in \mp3\) at begining of process to prevent confusion
					- go into each old-versoion album folder - get it's shit!
						- INTENT: basically, we need to pillage anything in the old-album's folder that we want to keep in the new album's folder
						- copy txt & lrc files - check that they match the new album version's naming
						- move/append attrib.lst from old to new - if the names of the songs changed (i.e. a 1-disc album is now a 2-disc album) attrib.lst will need updating 
						- move artwork/image files â€” might need a "cover art war" if more than 1, to see which is best
						- other stuff will require judgment, it may or may not apply
						- TIP: running "cthis" in each old-album folder will make it c:\c\ which can make copying this stuff over a lot easier
							- for example, in new-album-folder could do things like 'copy \c\*.lrc' and 'mv \c\attrib.lst\'
					- put.bat old version to \mp3-aux\{bandname} -- you may need to create the bandname subfolder
			- then do any ONEDIR folders - each song in the DIR must be dealt with ONE at a time, case-by-case         
			- next, process ALL non-album songs
				- i.e. any MISC folders (even ones within other folders--type "tree|highlight misc" to look for those) should be gone
				- there should be no "loose" songs whatsoever anywhere, for example often a \TRIBUTES\ folder will have non-album/loose songs
			- Now we are at a point where the only remaining stuff are new *ALBUMS* by *BANDS* (right? maybe type "tree" to be sure?)
		- "LEVEL: ORANGE" - the worst is over, but albums are a pain in the ass
			- the new albums need to be added to our base attrib lst!, which is done in regex
				- type "al" to open up base attrib lst
				- search for "NEWEST ASSIMILATED MUSIC GOES HERE" which has arrows pointing upward to the place new albums are supposed to go into
				- from inside of your BATCH folder: print-album-data-for-BaseAttribLst.bat 
					- does that look good? then     print-album-data-for-BaseAttribLst.bat  >clip:
                                                 ...and paste the results into the base attrib lst
				- the tricky part here is hand-editing the entries.  
					  You want them to be specific enough to ONLY hit the new files, but not so specific that they don't match if things change slightly.
					  It's an art.  
					  You can use always mchk to check your work
					- things to take out...
						- For example "incomplete" and "todo" references should be taken out, they may be tempmorary
						- "the.*" in bandmames should usually go, because we often invert things like "The Church" into "Church, The" and best to just not use the unless necessary
						- often times the year should be taken out if it's at the very end
						- 'MISC' folders and such -- better to treat those in the folder (creating MISC\changer, MISC\changerrecent, moving files one at a time into those) than to ever try addressing those in the base attribute file
						- things like this are onedir folders, the fact that the folder is called 'changerrecent' is what controls things, it should not be in here except as an informative comment that such folder exists:
							#TV.*CARTOONS.*1980s.*changer.*cheese:changer
							^see how it's commented out? because there's no need to put this folder in changer, the fact that 'changer' is part of the folder's name does it already
							#Metallica.*MISC:changer
							^see how it's commented out? because MISC should have 'changer', 'changerrecent', 'tolerable', etc folders and THAT's how those get put in changer/changerrecent/tolerable/etc
				- make sure the new entries are only the new albums!
				- if it's an album that is demos - the filename may be ambiguous with the studio album. 
					- You may need to rename the original album folder to disambiguate for example: "God Ween Satan (demos)" and "God Ween Satan (the album)" 
					- and then update the entries for *both* versions in attrib.lst so that the demo-version and non-demo-version are both distinct
				- make sure to comment out those albums that aren't really albums ("UNPROCESSED/ARCHIVED-ORIGINALS" folders often end up here)
				- when making a new folder for a brand new band that we've never had albums before
						- keep in mind that there may be songs by that band in the collection already that maybe should live in this new folder instead of where they were. Maybe.
						- and if they don't live in the new folder, nice to make a >"__ zero byte note talking about this other track elsewhere __" just to link things together
				- make sure to make decisions about which ones are going into changerrecent, or just changer, or just Christmas, or just preferred
					- by default things get added like this: {note how changerrecent also has a year and decade version of changerrecent}
						- example:  BabyMetal.*2.*2014.*Metal.*Resistance:changer,changerrecent,changerrecent2022,changerrecent2020s
					- example of something we'll listen to later and put in changer but not changerrecent: Bis.*Some album:changer,to learn
						- "to learn" is kind of a "let's put this in changerrecent at a later date" note-to-self
		- "LEVEL: YELLOW" - time to start moving folders into the official collection!
			- do non-music
			- do TV/cartoon/movie/novelty stuff
			- RULE OF THUMB: any ALL-CAPS folder needs doing first
		- "LEVEL: GREEN" - the last 1% of effort is sometimes 80% of the stuff we realllllllllllllllllly care about, so it's a nice pleasant step
			- eventually it's *possible* that we will get to a point where everything in our current batch precisely matches the structure of where it needs to go and can all be moved in with one command
				- might not be a good idea for Carolyn to ever do that without dry run capability added to moves



	

- run backup-mp3s to back up everything to all backup locations, reflecting the new changes

*************************************** ALL DONE!!! ***************************************

































BRAINSTORMING: Flac files don't display internal album art correctly, so if it's a MISC folder and a DIFFERENT song has a JPG companion, it'll pick that up and display the wrong cover
	Possible solution: Sweep entire music collection looking for all FLACs.  
		NOT QUITE: If there is not a cover.jpg file, extract it from each flac.
			But wait, a MISC folder of 80s hits would end up with one cover.jpg. so no can't blindly do this
			For a misc folder, we'd need.... a *sidecar* jpg for each and every flac.
				But we can't do this blindly! for albums it would be really dumb!
		Soooo:
			no flac files ------ don't worry
			all flac files ----- 
				if an album, should already have an extracted cover, but if not, extract ONE to cover.jpg
				if non-album, need companion JPGs
			some flac files ---- extract companion JPGs for the flac files

			.....soooO: pretty much, we want companion-jpgs for all FLACs unless it's an all-flac album (if exist [0-1]*.flac and not exist *.mp3) then just a cover.jpg

			....this should probably be done right before the step where we review all album art?



